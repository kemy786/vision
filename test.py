# ---------------------------------------------
# 📌 프로젝트: 나의 학습 알고리즘 찾기
# 고등학교 프로젝트용 Streamlit 앱
# ---------------------------------------------

import streamlit as st
import matplotlib.pyplot as plt

# -----------------------------
# 1. 페이지 기본 설정
# -----------------------------
st.set_page_config(page_title="나의 학습 알고리즘 찾기", page_icon="📘", layout="centered")

st.title("📘 나의 학습 알고리즘 찾기")
st.write("👩‍🎓 나는 어떤 학습 알고리즘으로 공부하는 타입일까? 질문에 답하고 결과를 확인해보세요!")

# -----------------------------
# 2. 질문과 선택지
# -----------------------------
questions = [
    {
        "question": "시험 공부할 때 나는?",
        "options": {
            "차근차근 순서대로 문제를 푼다": "정렬형",
            "제일 어려운 문제부터 도전한다": "깊이우선형"
        }
    },
    {
        "question": "모르는 문제가 나오면?",
        "options": {
            "교과서/노트를 다시 본다": "동적계획형",
            "검색하고 새로운 자료를 찾아본다": "탐색형"
        }
    },
    {
        "question": "시험 일주일 전 공부 스타일은?",
        "options": {
            "계획을 짜고 그대로 진행한다": "정렬형",
            "그날 하고 싶은 과목 위주로 공부한다": "랜덤형"
        }
    },
    {
        "question": "조별 과제가 나왔다! 나는?",
        "options": {
            "조직적으로 역할을 분담한다": "정렬형",
            "아이디어를 내고 분위기를 띄운다": "랜덤형"
        }
    },
]

# -----------------------------
# 3. 결과 유형 설명 (200자 이상)
# -----------------------------
result_desc = {
    "정렬형": "📑 정렬형 알고리즘 학생은 계획과 질서를 최우선으로 여깁니다. 공부를 시작하기 전부터 전체적인 흐름을 정리하고, 계획표에 맞춰 차근차근 진행합니다. 문제집도 앞에서부터 차례대로 풀고 오답도 일목요연하게 정리하죠. 이런 스타일은 공대에서 자료구조나 정렬 알고리즘을 배울 때, '내 얘긴데?' 하는 공감이 절로 나옵니다.",
    "깊이우선형": "🔍 깊이 우선 탐색형 학생은 한 문제를 붙잡으면 끝을 봐야 직성이 풀립니다. 어려운 문제에 꽂히면 밤을 새워서라도 해결하려는 집중력이 특징입니다. 가끔은 작은 것에 집착하다가 시간을 허비하기도 하지만, 누구도 생각 못 한 해법을 찾아내는 경우도 많습니다. 연구자 기질이 다분한 스타일입니다.",
    "동적계획형": "🔄 동적 계획법형 학생은 기초를 반복해서 쌓아 올리는 꾸준함의 아이콘입니다. 작은 단위로 문제를 나누고, 이전에 학습한 내용을 활용해 새로운 문제를 해결합니다. 그래서 수학, 코딩, 과학 실험 등에서 강력한 실력을 발휘하죠. 한 번 다진 기초는 쉽게 흔들리지 않는 든든한 타입입니다.",
    "탐색형": "🧭 탐색 알고리즘형 학생은 새로운 지식에 대한 호기심이 넘칩니다. 막히는 문제가 있으면 책뿐 아니라 인터넷, 영상, 친구 등 다양한 경로를 통해 답을 찾습니다. 정보 수집력이 뛰어나 최신 트렌드에도 밝습니다. 다만 너무 많은 정보를 접하다 보면 정리가 잘 안 될 때도 있지만, 창의적인 아이디어맨으로 빛납니다.",
    "랜덤형": "🎲 랜덤 접근형 학생은 자유롭고 유연한 학습 방식을 선호합니다. 그날의 기분이나 관심사에 따라 공부할 과목을 선택하고, 때론 예상치 못한 곳에서 성과를 올립니다. 계획형 친구들이 보면 답답할 수 있지만, 창의성과 직관력이 뛰어나 공대에서도 혁신적인 아이디어를 내는 인재가 될 수 있습니다.",
}

# -----------------------------
# 4. 사용자 응답 수집
# -----------------------------
st.header("📝 질문에 답해보세요")

scores = {key: 0 for key in result_desc.keys()}

for q in questions:
    choice = st.radio(q["question"], list(q["options"].keys()))
    scores[q["options"][choice]] += 1

# -----------------------------
# 5. 결과 계산
# -----------------------------
if st.button("📊 결과 확인하기"):
    final_type = max(scores, key=scores.get)

    st.subheader("✨ 당신의 학습 알고리즘 유형은...")
    st.markdown(f"## {final_type} 학생!")
    st.write(result_desc[final_type])

    # -------------------------
    # 6. 시각화 (Matplotlib)
    # -------------------------
    fig, ax = plt.subplots()
    ax.bar(scores.keys(), scores.values(), color="#FFB6C1", edgecolor="black")
    ax.set_title("📊 유형별 점수 분포", fontsize=14)
    plt.xticks(rotation=30)
    st.pyplot(fig)

    st.success("분석 완료! 🚀 결과를 친구들과 비교해보세요.")
