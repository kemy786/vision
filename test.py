# app.py
import streamlit as st
from collections import defaultdict

st.set_page_config(page_title="학교 생활 밸런스 게임", page_icon="🎓", layout="centered")
st.title("🎲 학교 생활 밸런스 게임")
st.write("엉뚱하고 웃긴 질문들에 답하면서, 당신의 학교 생활 유형을 알아보세요!")

# 질문 리스트 (8번 제외)
questions = [
    ("시험 전날, 당신의 선택은?", ["밤새 벼락치기 → 시험지 보자마자 뇌 정지", "그냥 자고 꿈속에서 시험지 미리 풀어본다"]),
    ("체육시간, 당신의 선택은?", ["달리기 결승선에서 포즈", "체육복만 입고 그늘에서 바람 쐬기"]),
    ("쉬는 시간에 나는...", ["자리에서 조용히 책 보기", "복도에서 갑자기 댄스 파티 시작"]),
    ("과제 제출, 당신의 방식은?", ["마감 3일 전 제출", "선생님이 부를 때까지 잠수"]),
    ("시험 끝난 날, 나는...", ["바로 복습 시작", "게임·넷플릭스 정주행 몰아보기"]),
    ("교실에 에어컨이 고장 났을 때", ["선생님께 민원 넣고 해결 시도", "부채질로 버티며 여름을 승화"]),
    ("급식 대기 줄에서 나는?", ["메뉴 분석 후 최적 동선 공략", "친구들과 수다에 몰입"])
]

# 답변별 점수 배분 (하나의 답변이 여러 유형에 점수)
answer_scores = {
    "밤새 벼락치기 → 시험지 보자마자 뇌 정지": {"모범생 3000 ✏️": 2, "지식 폭격기 📚": 1},
    "그냥 자고 꿈속에서 시험지 미리 풀어본다": {"잠꾸러기 고라니 😴": 2, "숨은 게이머 🎮": 1},
    "달리기 결승선에서 포즈": {"체육관 파이터 🥊": 2, "급발진 인싸 🚀": 1},
    "체육복만 입고 그늘에서 바람 쐬기": {"잠꾸러기 고라니 😴": 1, "환경 지키미 🌱": 1},
    "자리에서 조용히 책 보기": {"모범생 3000 ✏️": 1, "지식 폭격기 📚": 2},
    "복도에서 갑자기 댄스 파티 시작": {"복도 아이돌 🎤": 2, "급발진 인싸 🚀": 1},
    "마감 3일 전 제출": {"모범생 3000 ✏️": 2, "지식 폭격기 📚": 1},
    "선생님이 부를 때까지 잠수": {"조별과제 유령 👻": 2, "숨은 게이머 🎮": 1},
    "바로 복습 시작": {"모범생 3000 ✏️": 2, "지식 폭격기 📚": 1},
    "게임·넷플릭스 정주행 몰아보기": {"숨은 게이머 🎮": 2, "급발진 인싸 🚀": 1},
    "선생님께 민원 넣고 해결 시도": {"환경 지키미 🌱": 2, "모범생 3000 ✏️": 1},
    "부채질로 버티며 여름을 승화": {"잠꾸러기 고라니 😴": 1, "급발진 인싸 🚀": 1},
    "메뉴 분석 후 최적 동선 공략": {"급식 요정 🍱": 2, "모범생 3000 ✏️": 1},
    "친구들과 수다에 몰입": {"급식 요정 🍱": 1, "복도 아이돌 🎤": 1, "급발진 인싸 🚀": 1},
}

# 점수 초기화
scores = defaultdict(int)

# 질문과 답변 선택
st.header("📝 질문")
for i, (q, opts) in enumerate(questions):
    answer = st.radio(f"{i+1}. {q}", opts, index=None)
    if answer:
        for typ, pts in answer_scores[answer].items():
            scores[typ] += pts

# 결과 계산
if st.button("🎉 결과 보기"):
    if not scores:
        st.info("질문에 답변을 선택해주세요!")
    else:
        best_type = max(scores, key=scores.get)
        st.subheader("🏆 당신의 학교 생활 유형은...")
        st.markdown(f"## {best_type}", unsafe_allow_html=True)
        
        # 길고 과장된 유형 설명
        descriptions = {
            "모범생 3000 ✏️": """
📚 **모범생 3000**  
교과서와 문제집은 무지개색 형광펜으로 무장되어 있으며, 친구들이 놀 때도 혼자 ‘예습·복습 루틴’을 즐기는 자발적 학습 로봇.  
시험지를 받으면 긴장 대신 은근한 자신감이 폭발! 틀린 문제를 발견하면 세상이 무너진 듯 괴로워하며, 친구들의 도움 요청에도 ‘내가 해야 한다’는 책임감으로 가득 차 있음.  
속마음은 ‘공부 안 하면 얘들아 큰일난다’지만 겉으로는 늘 침착 모범생 포스 발산!
""",
            "급식 요정 🍱": """
🍱 **급식 요정**  
오늘 하루의 행복 지수는 오직 급식판 위 메뉴에 달려 있다!  
돈까스나 치즈 등장 시 텐션 300% 폭발, 반대로 멸치볶음이나 애매한 나물 등장 시 하루 종일 의욕 상실.  
급식실에서 최적 자리 선점과 흡입 후 친구들에게 메뉴 리뷰 전달까지 완벽 수행.  
시험 결과보다 메뉴표 확인이 우선순위인 급식 마스터!
""",
            "복도 아이돌 🎤": """
🎤 **복도 아이돌**  
쉬는 시간만 되면 복도가 무대, 친구들은 팬클럽!  
하이파이브, 인사, 미소, 모든 행동이 공연급 화려함. 선생님도 ‘에너지가 넘친다’ 감탄.  
교실에서는 조용하지만 복도만 나가면 모든 시선 집중.  
복도 투어만으로 인기 폭발하는 교내 스타!
""",
            "숨은 게이머 🎮": """
🎮 **숨은 게이머**  
교실에서는 평범해 보이지만, 종 치자마자 현실 로그아웃.  
게임과 공략 노트에 몰입하며 시험 기간에도 전략적 머리 사용.  
성적은 아슬아슬하게 유지, 게임 랭크는 안정적 상승.  
비밀스러운 히어로로 친구들은 알까 말까 하는 존재!
""",
            "잠꾸러기 고라니 😴": """
😴 **잠꾸러기 고라니**  
첫 교시 종이 울리면 세상은 조용한 자장가.  
팔베개, 목 꺾임 방지 등 자세 최적화가 필수.  
쉬는 시간 지나도 친구가 깨우지 않으면 하루 증발.  
시험 전날만큼은 깨어있는 아이러니, 선생님 지적에도 귀엽게 넘어가는 마법의 존재.
""",
            "지식 폭격기 📚": """
📚 **지식 폭격기**  
수업 시간 질문 폭포수, 친구들은 감탄과 피로 동시에 경험.  
백과사전급 지식, 조별 과제·시험 모두 만점 전략으로 수행.  
설명 늘어놓아 친구 멘탈은 깎지만, 지식 나누는 즐거움으로 멈출 수 없는 타입!
""",
            "체육관 파이터 🥊": """
🥊 **체육관 파이터**  
체육 시간만 되면 돌변하는 열정 전사.  
농구·달리기·체육 활동 시 국가대표급 포즈와 에너지 폭발.  
교실 복귀 시 체력 방전, 친구들 감탄 ‘진정한 스포츠 정신’.  
반의 체육 영웅으로 기억됨.
""",
            "환경 지키미 🌱": """
🌱 **환경 지키미**  
교실 불 끄기, 수도꼭지 잠그기, 분리수거 등 완벽 수행.  
친구들이 무심코 종이컵 버리면 ‘분리수거 해야지!’ 즉시 발동.  
불편함 감수하면서도 뿌듯, 학교 환경 수호자.  
때론 교내 태양광 설치 건의까지 고민하는 진정한 환경 전사.
""",
            "급발진 인싸 🚀": """
🚀 **급발진 인싸**  
평소엔 조용, 특정 순간 갑자기 폭발!  
대화 중 오버 리액션, 복도 댄스, 모든 순간 에너지 폭발.  
선생님 한마디면 시동 꺼지고, 다시 기회 오면 또 폭발.  
반 친구들에게 없어서는 안 될 텐션 폭발 존재.
"""
        }
        st.markdown(descriptions[best_type])
