import streamlit as st

# ì¹œêµ¬ ë°ì´í„°
friends = {
    "ë°•ì˜ì„œ": "ğŸ“˜ ëª¨ë²”ìƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ, ì†ì—” ì‹œì»¤ë¨¼ ë³¸ì‹¬ì´ ìˆ¨ì–´ìˆëŠ” 'íƒ€ê²©ê° ë§Œë ™' ì¸ê°„...",
    "ì´í˜œì—°": "ğŸ¤ ê°•ì ì•ì—ì„  ìŠ¤ìœ—, ì•½ì ì•ì—ì„  ê¹¡íŒ¨...",
    "ë°±íš¨ìŠ¬": "ğŸ’ª ê·¼ìœ¡ì— ì§€ëŠ¥ì„ ì‹¤ì€ ë§ˆë¼íƒ• ë§ˆìŠ¤í„°...",
    "ì˜¤ì°¬ì´": "ğŸ‰ ì¦‰í¥ì˜ ëíŒì™•...",
    "ì†¡ìˆ˜ë¯¼": "ğŸ”¥ ì™¸ê°•ë‚´ìœ ì˜ í™”ì‹ ...",
    "ê°•ìˆ˜í˜„": "ğŸ” ë¨¹ëŠ” ê²Œ ì¸ìƒ...",
    "ì›ë¯¼ì´": "ğŸŒ¿ ë‚˜ë¬´ëŠ˜ë³´ ê·¸ ìì²´..."
}

# ì§ˆë¬¸ ë°ì´í„°
questions = [
    {
        "question": "1. ì£¼ë§ì— ë­ í•˜ê³  ì‹¶ì–´?",
        "options": {
            "a": "ì±… ì½ê³  í˜¼ì ì‹œê°„ ë³´ë‚´ê¸°",
            "b": "ì¹œêµ¬ ë§Œë‚˜ì„œ ìˆ˜ë‹¤ ë–¨ê¸°",
            "c": "ìš´ë™ì´ë‚˜ ë•€ë‚˜ëŠ” í™œë™",
            "d": "ì§‘ì—ì„œ ë„·í”Œë¦­ìŠ¤ ì •ì£¼í–‰",
        }
    },
    {
        "question": "2. ì¹œêµ¬ê°€ ì¥ë‚œì¹˜ë©´ ë„Œ?",
        "options": {
            "a": "ì¼ë‹¨ ì°¸ë‹¤ê°€ ë³µìˆ˜í•œë‹¤",
            "b": "ê°™ì´ ì¥ë‚œì¹˜ë©° ë…¼ë‹¤",
            "c": "ì§„ì‹¬ìœ¼ë¡œ ì‚ì§„ë‹¤",
            "d": "ì¥ë‚œì€ ì‹«ì–´í•œë‹¤",
        }
    },
    {
        "question": "3. ë¬´ì¸ë„ì— ê°„ë‹¤ë©´ ì±™ê¸¸ ê²ƒì€?",
        "options": {
            "a": "ë¬¼ë¦¬ì±…",
            "b": "ê±°ìš¸ê³¼ í™”ì¥í’ˆ",
            "c": "íœ´ëŒ€í°ê³¼ ì™€ì´íŒŒì´",
            "d": "ë§ˆìŒì˜ í‰í™”",
        }
    }
]

# ì ìˆ˜ ë§¤í•‘
answer_map = {
    "a": ["ë°•ì˜ì„œ", "ë°±íš¨ìŠ¬"],
    "b": ["ì´í˜œì—°", "ê°•ìˆ˜í˜„"],
    "c": ["ì†¡ìˆ˜ë¯¼", "ë°±íš¨ìŠ¬"],
    "d": ["ì˜¤ì°¬ì´", "ì›ë¯¼ì´"]
}

# Streamlit UI ì‹œì‘
st.title("ğŸ¯ ì¹œêµ¬ ì¶”ì²œ ì„±ê²© í…ŒìŠ¤íŠ¸")
st.write("ë‹¹ì‹ ì˜ ì„±ê²©ì— ë§ëŠ” ì¹œêµ¬ë¥¼ ì°¾ì•„ë“œë¦´ê²Œìš”!")

# ë‹µë³€ ì €ì¥ìš©
user_answers = []

# ì§ˆë¬¸ ì¶œë ¥
for idx, q in enumerate(questions):
    choice = st.radio(
        q["question"],
        options=list(q["options"].keys()),
        format_func=lambda x, q=q: f"{x}) {q['options'][x]}",
        key=f"q{idx}"
    )
    user_answers.append(choice)

# ì œì¶œ ë²„íŠ¼
if st.button("ê²°ê³¼ ë³´ê¸°"):
    # ì ìˆ˜ ê³„ì‚°
    scores = {name: 0 for name in friends}
    for ans in user_answers:
        for name in answer_map.get(ans, []):
            scores[name] += 1

    max_score = max(scores.values())
    winners = [name for name, score in scores.items() if score == max_score]

    if len(winners) == 1:
        st.subheader("ğŸ‰ ë‹¹ì‹ ì—ê²Œ ì˜ ë§ëŠ” ì¹œêµ¬ëŠ”...")
        st.success(f"âœ¨ {winners[0]} âœ¨\n\n{friends[winners[0]]}")
    else:
        st.subheader("ğŸ‰ ë‹¹ì‹ ê³¼ ì˜ ë§ëŠ” ì¹œêµ¬ë“¤:")
        for w in winners:
            st.markdown(f"**âœ¨ {w} âœ¨**")
            st.write(friends[w])
