import streamlit as st, random

st.set_page_config(page_title="🎯 친구 추천 성격 테스트", page_icon="🎯", layout="centered")
st.markdown("<h1 style='text-align:center; color:#FF4B4B;'>🎯 친구 추천 성격 테스트</h1>", unsafe_allow_html=True)
st.write("당신의 성격을 과학(?)과 감으로 분석해, 놀랍도록 찰떡인 친구를 추천해드립니다!")

# ===================== 친구 데이터 (길고 재밌게) =====================
friends = {
    "박영서": "📘 **겉으론 모범생, 속은 빌런.** 교과서 표지에 얼굴 박아도 위화감이 없지만, 대화 몇 마디만 해도 알 수 있다 — 그는 지식과 말빵으로 사람을 KO시키는 인물이다. 시험기간엔 친구 놀릴 멘트를 암기하고, 발표시간엔 논문 대신 밈을 발표한다. 덕분에 선생님도 웃다가 화 못 내는 묘한 존재.",
    "이혜연": "🎤 **장난의 신.** 강자 앞에선 천사, 약자(?) 앞에선 장난 폭격기. 밥 먹으러 가자더니 길가에서 갑자기 춤을 추고, 조용히 걷다가도 길고양이랑 대화 시작한다. 웃긴 건 이런 모든 상황이 어색하지 않다는 것.",
    "백효슬": "💪 **근육과 뇌를 동시에 장착.** 체육관에서 역기를 들다가도 '이건 뉴턴의 제2법칙이...' 하며 공식 얘기 꺼낸다. 덕분에 운동하다 머리가 아픈 독특한 경험을 하게 만든다. 웃고 있으면 귀여운데, 그 웃음이 '곧 장난칠 예정' 경고일 수 있다.",
    "오찬이": "🎉 **약속 스케줄러 + 귀차니스트.** 오늘 여행 가자더니 다음날 침대 위. 하지만 아이돌 콘서트 날은 새벽부터 줄 서는 열정맨. 순간적인 충동으로 계획을 세우지만, 실행은 랜덤.",
    "송수민": "🔥 **외강내유 피구 전설.** 공을 던지면 소리가 ‘휙’ 하는데 그게 공이 아니라 공기다. 장난은 위험하지만, 위로는 따뜻하다. 울고 있는 친구 옆에서 아무 말 없이 같이 앉아주는 그 순간, 모든 오해가 풀린다.",
    "강수현": "🍔 **맛집 GPS + 개그머신.** 수학 문제 풀다 배고프면 맛집 추천, 친구가 심심하면 즉석 개그 쇼. 화장, 수학, 먹방까지 3콤보를 완벽히 구사하는 만능 인재.",
    "원민이": "🌿 **인간 나무늘보.** 감정 기복이 없어 폭풍 속에서도 평온. 하지만 한마디 던질 때마다 묘하게 핵심을 찌른다. 조용하지만 필요한 순간엔 분위기를 바꾸는 마법사."
}

# ===================== 질문 데이터 (웃기고 길게) =====================
questions = [
    {
        "q": "1. 일요일 아침 9시, 친구가 ‘지금 당장 나가서 놀자’고 전화함. 당신은?",
        "o": {
            "a": "이미 운동복을 입고 문 앞에 서 있다.",
            "b": "전화 받자마자 '5분 안에 갈게!' (그리고 30분 뒤 출발)",
            "c": "잘 거니까 전화 끊어.",
            "d": "나가긴 하는데 카페 가서 책 볼 거임."
        }
    },
    {
        "q": "2. 급식 메뉴가 최애 음식인 날, 친구가 한입 달라고 함. 당신은?",
        "o": {
            "a": "한 입? 통째로 먹어.",
            "b": "한입 주고 대신 디저트 요구.",
            "c": "눈으로 경고 후 작은 조각만 준다.",
            "d": "못 들은 척 밥을 빨리 먹는다."
        }
    },
    {
        "q": "3. 시험 전날 밤 11시, 갑자기 배고파짐. 당신의 선택은?",
        "o": {
            "a": "편의점 라면 + 삼각김밥 세트 폭식.",
            "b": "야식은 참지만 시험 범위 다시 본다.",
            "c": "배고픈 거 잊으려고 드라마 3편 정주행.",
            "d": "그냥 잔다. 꿈에서 먹을 거니까."
        }
    },
    {
        "q": "4. 친구가 ‘내일 머리 파란색으로 염색할래?’라고 함. 당신은?",
        "o": {
            "a": "좋아, 같이 가자!",
            "b": "왜? 무슨 일 있어?",
            "c": "사진만 찍어서 보내.",
            "d": "응, 근데 난 집에 있을게."
        }
    },
    {
        "q": "5. 모르는 번호로 전화가 옴. 당신은?",
        "o": {
            "a": "바로 받는다. (혹시 좋은 일일 수 있으니까)",
            "b": "메시지 먼저 확인.",
            "c": "무시하고 다시 오면 받는다.",
            "d": "절대 안 받는다."
        }
    }
]

# ===================== 답변 매핑 =====================
map_score = {
    "a": ["백효슬","오찬이"],
    "b": ["강수현","이혜연"],
    "c": ["송수민","원민이"],
    "d": ["박영서","원민이"]
}

# ===================== UI & 로직 =====================
ans = []
for i,q in enumerate(questions):
    ans.append(st.radio(q["q"], list(q["o"].keys()), format_func=lambda x,q=q: f"{x}) {q['o'][x]}", key=i))

if st.button("💡 결과 보기"):
    score = {k:0 for k in friends}
    for a in ans:
        for name in map_score[a]: score[name]+=1
    best = max(score, key=score.get)  # 한 명만
    st.markdown(f"<h2 style='color:#4CAF50;'>🎉 당신과 찰떡인 친구는...</h2>", unsafe_allow_html=True)
    st.markdown(f"<h1 style='text-align:center;'>✨ {best} ✨</h1>", unsafe_allow_html=True)
    st.info(friends[best])
