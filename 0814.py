import streamlit as st, random

st.set_page_config(page_title="🎯 친구 추천 성격 테스트", page_icon="🎯", layout="centered")
st.markdown("<h1 style='text-align:center; color:#FF4B4B;'>🎯 친구 추천 성격 테스트</h1>", unsafe_allow_html=True)
st.write("당신의 성격을 과학(?)과 감으로 분석해, 놀랍도록 찰떡인 친구를 추천해드립니다!")

# ===================== 친구 데이터 (길고 재밌게) =====================
friends = {
    "박영서": "📘 겉으론 전형적인 모범생, 속으론 교실을 장악하는 웃음 설계자. 수업 시간엔 누구보다 진지하게 필기하며, 색깔별 포스트잇으로 책상 위를 정리하지만, 그 안엔 ‘다음에 놀릴 친구 목록’과 ‘선생님 웃기는 멘트’가 빼곡하다. 발표 자료에 귀여운 캐릭터를 숨겨놓고, 시험 직전엔 '이 공식만 외우면 돼!'라며 장난 반 진담 반의 요약을 알려준다. 그런데 놀랍게도 그게 꽤나 맞아떨어진다. 시험이 끝나면 의미심장한 미소를 짓고, 그 순간 친구들은 다시금 확신한다. 그는 단순한 모범생이 아니라, 교실을 조용히 지배하는 전략가다.",
    
    "이혜연": "🎤 에너지가 폭발하는 무대 체질, 조용함과는 거리가 먼 교실의 불꽃. 아무리 조용한 상황이라도 그녀가 들어오면 공기가 바뀐다. 쉬는 시간에는 친구 필기장에 엉뚱한 만화를 그리고, 체육 시간엔 달리다 멈춰서 하늘을 보며 ‘저 구름 닭다리 같지 않아?’라고 말한다. 시험 전날에는 공부 대신 ‘내일 망하면 다 같이 노래방 가자’라고 제안하고, 실제로 실행에 옮긴다. 누군가 ‘지금은 아니야’라고 해도 ‘인생은 한 번뿐이야!’라는 명언을 날린다. 그녀가 있는 곳엔 늘 웃음과 에너지가 끊이지 않는다.",
    
    "백효슬": "💪 운동과 공부 모두에서 만능을 자랑하는 교실의 히어로. 체육대회에서는 주종목이 뭐든 금메달 후보이며, 과학 시간에는 친구들의 질문 세례를 받는다. 아령을 들고 물리 공식을 떠올리고, 달리기 중에도 ‘이건 마찰력이…’라며 계산하는 모습은 이미 전설. 힘이 필요한 날이면 자연스럽게 호출되고, 그가 등장하면 상황이 단번에 해결된다. 시험 전날에도 여유롭게 웃고, 정작 시험 당일에는 상위권에 이름을 올린다. 친구가 속상해하면 묵묵히 옆에 앉아주는 따뜻함까지 갖춘, 완벽한 조력자다.",
    
    "오찬이": "🎉 계획은 완벽하게 세우지만, 실행은 순전히 기분에 달린 자유 영혼. 여행 계획을 짜면 교통편부터 맛집까지 깔끔하게 정리하지만, 막상 당일엔 ‘그냥 쉬자’고 말하기도 한다. 그러나 좋아하는 아이돌 공연이나 신상 카페라면 새벽에도 번쩍 일어난다. 하루 종일 새로운 아이디어를 쏟아내고, 그중 일부는 실제로 실행돼 친구들에게 잊지 못할 추억을 남긴다. 한 번은 점심시간에 ‘지금 바다 보러 가자’고 해서 진짜로 가버린 사건은 아직도 회자된다. 그의 예측 불가능함이 바로 매력 포인트다.",
    
    "송수민": "🔥 운동장에서 불타오르는 카리스마와, 평소의 따뜻한 성격이 절묘하게 공존하는 인물. 피구공을 던지면 바람이 가르며 ‘슉’ 소리가 나고, 맞은 사람은 깜짝 놀란다. 그러나 쉬는 시간엔 조용히 친구의 이야기를 들어주고, 시험 전날엔 ‘넌 할 수 있어’라는 짧지만 힘이 되는 말을 건넨다. 운동할 땐 눈빛이 매서워지고, 경기가 끝나면 바로 웃음을 되찾는다. 그 균형 잡힌 모습 덕분에 친구들 사이에서 신뢰와 존경을 동시에 받는다.",
    
    "강수현": "🍔 먹는 걸 사랑하는 미식가이자, 웃음을 만드는 개그맨. 새로운 음식점 정보를 들으면 그날 바로 확인하러 가는 추진력을 가지고 있다. 수업 중에도 친구들에게 ‘여기서 버스 타면 20분 거리에 맛집 있다’고 귓속말을 한다. 여행을 가면 관광지보다 먼저 음식점을 찾고, 시험이 끝난 날엔 ‘맛집 3곳 하루 만에 털기 프로젝트’를 감행한다. 음식뿐만 아니라 상황에 맞춘 개그 센스도 뛰어나 분위기 메이커 역할을 톡톡히 한다.",
    
    "원민이": "🌿 조용하고 느릿한 듯 보이지만, 결정적인 순간에 한마디로 분위기를 바꾸는 철학자형 친구. 수업 중 졸고 있는 것 같다가도 선생님 질문에는 정확히 답해 모두를 놀라게 한다. 평소에는 말수가 적지만, 입을 열면 묘하게 설득력 있는 농담이나 깊이 있는 말을 한다. 시험 전날에는 ‘내일 끝나도 인생은 계속된다’는 식으로 친구들의 긴장을 풀어준다. 누구보다 차분한데, 때로는 엉뚱한 아이디어를 던져 모두를 웃게 만드는 숨은 개그감도 있다."
}

# ===================== 질문 데이터 (웃기고 길게) =====================
questions = [
    {
        "q": "1. 일요일 아침 9시, 친구가 ‘지금 당장 나가서 놀자’고 전화함. 당신은?",
        "o": {
            "a": "이미 운동복을 입고 문 앞에 서 있다.",
            "b": "전화 받자마자 '5분 안에 갈게!' (그리고 30분 뒤 출발)",
            "c": "잘 거니까 전화 끊어.",
            "d": "나가긴 하는데 카페 가서 책 볼 거임."
        }
    },
    {
        "q": "2. 급식 메뉴가 최애 음식인 날, 친구가 한입 달라고 함. 당신은?",
        "o": {
            "a": "한 입? 통째로 먹어.",
            "b": "한입 주고 대신 디저트 요구.",
            "c": "눈으로 경고 후 작은 조각만 준다.",
            "d": "못 들은 척 밥을 빨리 먹는다."
        }
    },
    {
        "q": "3. 시험 전날 밤 11시, 갑자기 배고파짐. 당신의 선택은?",
        "o": {
            "a": "편의점 라면 + 삼각김밥 세트 폭식.",
            "b": "야식은 참지만 시험 범위 다시 본다.",
            "c": "배고픈 거 잊으려고 드라마 3편 정주행.",
            "d": "그냥 잔다. 꿈에서 먹을 거니까."
        }
    },
    {
        "q": "4. 친구가 ‘내일 머리 파란색으로 염색할래?’라고 함. 당신은?",
        "o": {
            "a": "좋아, 같이 가자!",
            "b": "왜? 무슨 일 있어?",
            "c": "사진만 찍어서 보내.",
            "d": "응, 근데 난 집에 있을게."
        }
    },
    {
        "q": "5. 모르는 번호로 전화가 옴. 당신은?",
        "o": {
            "a": "바로 받는다. (혹시 좋은 일일 수 있으니까)",
            "b": "메시지 먼저 확인.",
            "c": "무시하고 다시 오면 받는다.",
            "d": "절대 안 받는다."
        }
    }
]

# ===================== 답변 매핑 =====================
map_score = {
    "a": ["백효슬","오찬이"],
    "b": ["강수현","이혜연"],
    "c": ["송수민","원민이"],
    "d": ["박영서","원민이"]
}

# ===================== UI & 로직 =====================
ans = []
for i,q in enumerate(questions):
    ans.append(st.radio(q["q"], list(q["o"].keys()), format_func=lambda x,q=q: f"{x}) {q['o'][x]}", key=i))

if st.button("💡 결과 보기"):
    score = {k:0 for k in friends}
    for a in ans:
        for name in map_score[a]: score[name]+=1
    best = max(score, key=score.get)  # 한 명만
    st.markdown(f"<h2 style='color:#4CAF50;'>🎉 당신과 찰떡인 친구는...</h2>", unsafe_allow_html=True)
    st.markdown(f"<h1 style='text-align:center;'>✨ {best} ✨</h1>", unsafe_allow_html=True)
    st.info(friends[best])
